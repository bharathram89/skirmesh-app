
<div class="container">
<div *ngIf="selectedField"
      class="btn btn-secondary btn-block"
      (click)="deSelectField()">Go Back
</div>

<div class="container">

<div *ngIf="!selectedField" class="row">


  <div *ngFor="let field of fieldCardData;"
       class="card user-card col-sm-3 d-flex px-1 py-1 gx-1 gy-1">

      <div class="card-header"
           [value]="field.id"
           (click)="selectField(field.id)">
        <h5> {{field.name}} ({{field.configs.length}})</h5>
      </div>

      <div class="card-body"
           [value]="field.id"
           (click)="selectField(field.id)">

         <img
            class="img img-thumbnail"
            src="{{field.imageData}}"
            onerror="this.onerror=null"
            alt=""/>

         <div class="card-title" [innerHtml]="field.description"></div>

      </div>

  </div>

</div>

<div *ngIf="selectedField" class="row">

  <button *ngIf="userSvc.getFieldProfileID() && userSvc.getFieldProfileID() == selectedMode?.fieldProfileID"
       class="btn btn-danger btn-block"
       [disabled]="!selectedGame?.id"
       (click)="deleteGame()"> DELETE </button>

        <div class="container">

          <div class="card-header row">
            <h5> {{selectedField.name}} ({{selectedField.configs.length}})</h5>
          </div>

          <div class="card-body row">

            <div class="col-sm-4">

            <img
              class="img img-thumbnail"
              src="{{selectedField.imageData}}"
              onerror="this.onerror=null"
              alt=""/>

            </div>

            <div class="col-sm-4 px-1 py-1 gx-1 gy-1">

              <select class="form-control" (change)="changeGameMode($event)">
                  <option disabled selected> -- Select Game Mode -- </option>
                  <option [value]=config.id *ngFor="let config of selectedField.configs">
                      {{config.description}} ({{config.games.length}})</option>
              </select>
              <br/>
              <ngx-datatable
                  *ngIf="selectedMode"
                  style="overflow-y:scroll"
                  class="material striped"
                  [rows]="selectedMode.games"
                  rowHeight="auto"
                  [columns]="[
                          {name:'Game Date',      prop:'creationDate',   sortable:true}
                        ]"
                  [columnMode]="'force'"
                  [selectionType]="'single'"
                  [limit]="5"
                  [trackByProp]="'updated'"
                  [footerHeight]="'auto'"
                  (select)="changeGame($event)">
              </ngx-datatable>

            </div>



            <div *ngIf="selectedGame && selectedMode" class="col-sm-4 px-1 py-1 gx-1 gy-1">
            <app-map [gameID]="selectedGame?.id" [mapID]="selectedMode?.mapID" [deviceData]="selectedMode?.deviceMap"></app-map>
            </div>

            </div>


            <div *ngIf="selectedGame && selectedMode" class="col">
            <app-team-score [teams]="scoreSvc?.teams" [barChartData]="scoreSvc?.barChartData" ></app-team-score>
            </div>


        </div>

  </div>
